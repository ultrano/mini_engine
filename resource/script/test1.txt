
var vector2 = 
{
  type   : "vector2",
  new    : func(x, y) { var v = {x: ::float(x), y: ::float(y)}; ::setmeta(v, this); return v; },
  length : func() { return ::sqrt(x*x + y*y); },
  dot    : func() { return new(x*x, y*y); },
  add    : func(v) { return new(x+v.x, y+v.y);},
  sub    : func(v) { return new(x-v.x, y-v.y);},
  scale  : func(f) { x *= f; y *= f; return this; },
  "->"   : this,
  "=="   : func(val) { return (x == val.x && y == val.y); },
  "+"    : add,
  "-"    : sub,
  "~"    : func() { ::print("vector2 finalized"); },
};

print(typeof(vector2.count));

var v = vector2.new(0,2);
print("v.foo " + v.scale(2.2).y);
print("vector2.count: " + vector2.count());
print("vector2.total: " + vector2.total());


print("GC: " + ::GC());

var itor = {};
while (vector2.traverse(itor))
{
  print("index: " + itor.index + ", key: "+itor.key+", val: "+itor.val);
}

var data = {"widget": {
    "debug": "on",
    "window": {
        "title": "Sample Konfabulator Widget",
        "name": "main_window",
        "width": 500,
        "height": 500
    },
    "image": { 
        "src": "Images/Sun.png",
        "name": "sun1",
        "hOffset": 250,
        "vOffset": 250,
        "alignment": "center"
    },
    "text": {
        "data": "Click Here",
        "size": 36,
        "style": "bold",
        "name": "text1",
        "hOffset": 250,
        "vOffset": 100,
        "alignment": "center",
        "onMouseUp": "sun1.opacity = (sun1.opacity / 100) * 90;"
    }
}};

print(""+data.widget.debug);
